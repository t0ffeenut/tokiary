<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>제품 상세보기</title>
</head>
<body>
<h1>제품 상세보기</h1>

<input type="hidden" name="page" th:value="${page}">
<input type="hidden" name="size" th:value="${size}">
<input type="hidden" name="keyword" th:value="${keyword}">

<p>제품번호: <span th:text="${product.id}"></span></p>
<p>제품이름: <span th:text="${product.title}"></span></p>
<p>제품가격: <span th:text="${product.price}"></span></p>
<p>제품설명: <span th:text="${product.content}"></span></p>
<p>제품등록일: <span th:text="${#temporals.format(product.createDate,'yyyy-MM-dd HH:mm')}"></span></p>

<hr>
<!-- ✅ 목록은 항상 표시 -->
<a th:href="@{/product/list(page=${page}, size=${size}, keyword=${keyword})}">목록</a>

<!-- ✅ 로그인 했을 때만 수정/삭제 표시 -->
<span th:if="${session.loginId != null}">

    <!-- 일반회원: 자기 상품만 수정/삭제 가능 -->
    <span th:if="${session.memberRank == '1' and product.writer == session.loginId}">
        | <a th:href="@{/product/sujung/{id}(id=${product.id}, page=${page}, size=${size}, keyword=${keyword})}">수정</a>
        | <a th:href="@{/product/sakje/{id}(id=${product.id}, page=${page}, size=${size}, keyword=${keyword})}">삭제</a>
    </span>

    <!-- 관리자(2,3): 모든 상품 수정/삭제 가능 -->
    <span th:if="${session.memberRank == '2' or session.memberRank == '3'}">
        | <a th:href="@{/product/sujung/{id}(id=${product.id}, page=${page}, size=${size}, keyword=${keyword})}">수정</a>
        | <a th:href="@{/product/sakje/{id}(id=${product.id}, page=${page}, size=${size}, keyword=${keyword})}">삭제</a>
    </span>

</span>

</body>
</html>
